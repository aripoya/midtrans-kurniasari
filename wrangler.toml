# This top-level configuration is for the development environment, used by `wrangler dev`.
name = "order-management-app-dev"
main = "src/worker.js"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# --- Development Environment Configuration ---
# Used when running `wrangler dev`

# D1 Database binding for local development.
# `wrangler dev` will automatically create a local SQLite file in the .wrangler/ directory.
[[d1_databases]]
binding = "DB"      # Standardized to 'DB' for consistency across environments
database_name = "order-management-local-db"
database_id = "2f4c7a87-1924-4b87-8fa7-3854fa2a433d"

# R2 Storage binding for local development
[[r2_buckets]]
binding = "SHIPPING_IMAGES" # Name this binding will have in your Worker
bucket_name = "kurniasari-shipping-images"

# --- Production Environment Configuration ---
# Used when running `wrangler deploy --env production`
[env.production]
name = "order-management-app-production"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

[env.production.ai]
binding = "AI"

[env.production.vars]
MIDTRANS_IS_PRODUCTION = "true"
APP_NAME = "Order Management System"
# Cloudflare Images configuration
# Replace these with your actual values:
CLOUDFLARE_ACCOUNT_ID = "13b5c18f23aa268941269ea0db1d1e5a"  # Your Cloudflare Account ID (from dashboard)
CLOUDFLARE_IMAGES_HASH = "VOaIVVmd1MuafKWFhxa5zw"  # Your Cloudflare Images Hash (from Images dashboard)
# CLOUDFLARE_IMAGES_TOKEN will be set as a secret separately

# Production D1 database binding
[[env.production.d1_databases]]
binding = "DB"
database_name = "order-management-prod"
database_id = "f6cb67ec-b81a-4d0c-a1e4-33929af8d205"

# Production R2 bucket binding
[[env.production.r2_buckets]]
binding = "SHIPPING_IMAGES"
bucket_name = "kurniasari-shipping-images"

# Workers AI binding
[ai]
binding = "AI"
